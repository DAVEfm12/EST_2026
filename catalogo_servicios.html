<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Catálogo de Servicios | LK Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>

<body class="bg-black text-white">

<div class="container py-5">

  <h1 class="text-warning fw-bold text-center mb-2">
    Catálogo de Servicios
  </h1>
  <p class="text-center text-white-50 mb-4">
    Administración de servicios (CRUD)
  </p>

  <!-- BOTÓN CREAR -->
  <div class="text-end mb-4">
    <button class="btn btn-warning fw-bold" data-bs-toggle="modal" data-bs-target="#modalServicio">
      <i class="fas fa-plus"></i> Agregar Servicio
    </button>
  </div>

  <!-- LISTADO -->
  <div class="row g-4" id="listaServicios">
    <!-- JS -->
  </div>

</div>

<!-- MODAL CREAR / EDITAR -->
<div class="modal fade" id="modalServicio" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white border border-warning">

      <div class="modal-header">
        <h5 class="modal-title text-warning" id="modalTitulo">Nuevo Servicio</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <input type="hidden" id="servicioId">

        <label class="form-label">Nombre</label>
        <input class="form-control bg-black text-white border-warning mb-3" id="nombre">

        <label class="form-label">Descripción</label>
        <textarea class="form-control bg-black text-white border-warning mb-3" id="descripcion"></textarea>

        <label class="form-label">Precio</label>
        <input type="number" class="form-control bg-black text-white border-warning" id="precio">
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-warning fw-bold" onclick="guardarServicio()">Guardar</button>
      </div>

    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ===== DATOS SIMULADOS (SIN BACKEND) ===== */
let servicios = [
  { id: 1, nombre: "Uñas Acrílicas", descripcion: "Aplicación profesional con diseño", precio: 500 },
  { id: 2, nombre: "Maquillaje Profesional", descripcion: "Eventos y sesiones especiales", precio: 800 }
];

let editando = false;

/* ===== READ ===== */
function renderServicios() {
  const contenedor = document.getElementById("listaServicios");
  contenedor.innerHTML = "";

  servicios.forEach(s => {
    contenedor.innerHTML += `
      <div class="col-md-4">
        <div class="bg-dark p-4 rounded-4 border border-warning h-100">
          <h5 class="fw-bold text-warning">${s.nombre}</h5>
          <p class="text-white-50">${s.descripcion}</p>
          <p class="fw-bold">$${s.precio}</p>

          <div class="d-flex gap-2">
            <button class="btn btn-sm btn-outline-warning" onclick="editarServicio(${s.id})">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-sm btn-outline-danger" onclick="eliminarServicio(${s.id})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    `;
  });
}

/* ===== CREATE / UPDATE ===== */
function guardarServicio() {
  const nombre = document.getElementById("nombre").value;
  const descripcion = document.getElementById("descripcion").value;
  const precio = document.getElementById("precio").value;
  const id = document.getElementById("servicioId").value;

  if (editando) {
    const servicio = servicios.find(s => s.id == id);
    servicio.nombre = nombre;
    servicio.descripcion = descripcion;
    servicio.precio = precio;
  } else {
    servicios.push({
      id: Date.now(),
      nombre,
      descripcion,
      precio
    });
  }

  limpiarFormulario();
  renderServicios();
  bootstrap.Modal.getInstance(document.getElementById("modalServicio")).hide();
}

/* ===== UPDATE ===== */
function editarServicio(id) {
  const servicio = servicios.find(s => s.id === id);

  document.getElementById("modalTitulo").innerText = "Editar Servicio";
  document.getElementById("nombre").value = servicio.nombre;
  document.getElementById("descripcion").value = servicio.descripcion;
  document.getElementById("precio").value = servicio.precio;
  document.getElementById("servicioId").value = servicio.id;

  editando = true;

  new bootstrap.Modal(document.getElementById("modalServicio")).show();
}

/* ===== DELETE ===== */
function eliminarServicio(id) {
  if (confirm("¿Eliminar este servicio?")) {
    servicios = servicios.filter(s => s.id !== id);
    renderServicios();
  }
}

/* ===== UTILS ===== */
function limpiarFormulario() {
  editando = false;
  document.getElementById("modalTitulo").innerText = "Nuevo Servicio";
  document.getElementById("nombre").value = "";
  document.getElementById("descripcion").value = "";
  document.getElementById("precio").value = "";
  document.getElementById("servicioId").value = "";
}

renderServicios();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>LK Studio | Dashboard de Beneficios VIP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #F1D592;
            --deep: #080808;
            --surface: #121212;
            --glass-white: rgba(255, 255, 255, 0.05);
        }

        body {
            background-color: var(--deep);
            color: #e0e0e0;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
        }

        .luxury-font { font-family: 'Cinzel', serif; letter-spacing: 2px; }

        /* Estilo Sidebar */
        .sidebar {
            height: 100vh;
            width: 260px;
            position: fixed;
            background: black;
            border-right: 1px solid var(--gold);
            padding: 30px 15px;
        }

        .main-content { margin-left: 260px; padding: 40px; }

        /* Cards Estilizadas */
        .luxury-card {
            background: var(--surface);
            border: 1px solid #222;
            border-radius: 20px;
            padding: 25px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .luxury-card:hover {
            border-color: var(--gold);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.1);
        }

        /* CRUD Controls */
        .form-control-vip {
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 12px;
            border-radius: 10px;
        }

        .form-control-vip:focus {
            background: #222;
            border-color: var(--gold);
            color: white;
            box-shadow: none;
        }

        /* Tabla Estilizada */
        .table-vip {
            color: white;
            border-collapse: separate;
            border-spacing: 0 10px;
        }

        .table-vip tr { background: var(--glass-white); transition: 0.3s; }
        .table-vip tr:hover { background: rgba(212, 175, 55, 0.05); }
        .table-vip td, .table-vip th { 
            padding: 15px; 
            border: none; 
            vertical-align: middle;
        }

        .badge-level {
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
        }

        .level-diamond { background: linear-gradient(45deg, #b9f2ff, #2980b9); color: #000; }
        .level-gold { background: linear-gradient(45deg, #ffd700, #b8860b); color: #000; }
        .level-silver { background: linear-gradient(45deg, #bdc3c7, #2c3e50); color: #fff; }

        .btn-action {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }

        .btn-edit { background: rgba(212, 175, 55, 0.2); color: var(--gold); border: 1px solid var(--gold); }
        .btn-delete { background: rgba(220, 53, 69, 0.2); color: #ff4d4d; border: 1px solid #ff4d4d; }

        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; }
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h3 class="luxury-font text-gold text-center mb-5">LK STUDIO</h3>
    <div class="nav flex-column">
        <a href="PANEL_ADMIN.html" class="nav-link text-white-50 mb-3"><i class="fas fa-chart-line me-2"></i> Dashboard</a>
        <a href="#" class="nav-link text-gold mb-3 active"><i class="fas fa-crown me-2"></i> Gestión Beneficios</a>
        <a href="citas.html" class="nav-link text-white-50 mb-3"><i class="fas fa-calendar-alt me-2"></i> Agenda Maestra</a>
    </div>
</div>

<div class="main-content">
    <div class="d-flex justify-content-between align-items-end mb-5">
        <div>
            <h1 class="luxury-font text-gold mb-0">CATÁLOGO DE PRIVILEGIOS VIP</h1>
            <p class="text-white-50">Configuración de Experiencias y Recompensas</p>
        </div>
        <button class="btn btn-outline-warning" onclick="resetForm()" data-bs-toggle="modal" data-bs-target="#benefitModal">
            <i class="fas fa-plus me-2"></i> NUEVO BENEFICIO
        </button>
    </div>

    <div class="row mb-5 g-4">
        <div class="col-md-4">
            <div class="luxury-card text-center">
                <h6 class="text-white-50 small">TOTAL BENEFICIOS</h6>
                <h2 class="luxury-font text-gold" id="statTotal">0</h2>
            </div>
        </div>
        <div class="col-md-4">
            <div class="luxury-card text-center">
                <h6 class="text-white-50 small">NIVEL MÁS ALTO</h6>
                <h2 class="luxury-font text-info">DIAMOND</h2>
            </div>
        </div>
        <div class="col-md-4">
            <div class="luxury-card text-center">
                <h6 class="text-white-50 small">CANJES ESTE MES</h6>
                <h2 class="luxury-font text-success">124</h2>
            </div>
        </div>
    </div>

    <div class="luxury-card">
        <div class="table-responsive">
            <table class="table table-vip">
                <thead>
                    <tr class="text-gold small uppercase">
                        <th>Icono</th>
                        <th>Nombre del Beneficio</th>
                        <th>Nivel Acceso</th>
                        <th>Costo Puntos</th>
                        <th>Frecuencia</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="benefitTableBody">
                    </tbody>
            </table>
        </div>
    </div>
</div>

<div class="modal fade" id="benefitModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-dark border-gold" style="border: 1px solid var(--gold); border-radius: 20px;">
            <div class="modal-header border-secondary">
                <h5 class="modal-title luxury-font text-gold" id="modalLabel">CONFIGURAR PRIVILEGIO</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <form id="benefitForm">
                    <input type="hidden" id="editIndex">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="small mb-1 text-white-50">Nombre del Beneficio</label>
                            <input type="text" class="form-control form-control-vip" id="bNombre" placeholder="Ej: Retoque 2x1" required>
                        </div>
                        <div class="col-md-6">
                            <label class="small mb-1 text-white-50">Nivel de Membresía Requerido</label>
                            <select class="form-select form-control-vip" id="bNivel">
                                <option value="Silver">Silver</option>
                                <option value="Gold">Gold</option>
                                <option value="Diamond">Diamond</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="small mb-1 text-white-50">Icono (FontAwesome)</label>
                            <input type="text" class="form-control form-control-vip" id="bIcono" placeholder="fas fa-gift">
                        </div>
                        <div class="col-md-4">
                            <label class="small mb-1 text-white-50">Costo en Puntos</label>
                            <input type="number" class="form-control form-control-vip" id="bPuntos" value="0">
                        </div>
                        <div class="col-md-4">
                            <label class="small mb-1 text-white-50">Vigencia (Meses)</label>
                            <input type="number" class="form-control form-control-vip" id="bVigencia" value="12">
                        </div>
                        <div class="col-12">
                            <label class="small mb-1 text-white-50">Descripción Exclusiva</label>
                            <textarea class="form-control form-control-vip" id="bDesc" rows="3" placeholder="Describe la experiencia VIP..."></textarea>
                        </div>
                        <div class="col-md-12">
                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input" type="checkbox" id="bActivo" checked>
                                <label class="form-check-label text-white">Beneficio Activo inmediatamente</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-dark px-4" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-warning px-4" onclick="saveBenefit()">GUARDAR CAMBIOS</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let beneficios = JSON.parse(localStorage.getItem("LK_CATALOGO_BENEFICIOS")) || [
        {nombre: "Café Gourmet Ilimitado", nivel: "Silver", puntos: 0, icono: "fas fa-coffee", desc: "Acceso a barra de café premium", activo: true},
        {nombre: "Kit Post-Cuidado Diamond", nivel: "Diamond", puntos: 500, icono: "fas fa-box-open", desc: "Incluye shampoo de pestañas y cepillo de cristal", activo: true}
    ];

    function renderTable() {
        const tbody = document.getElementById('benefitTableBody');
        tbody.innerHTML = '';
        
        beneficios.forEach((b, index) => {
            const row = `
                <tr class="animate__animated animate__fadeIn">
                    <td><i class="${b.icono} text-gold fa-lg"></i></td>
                    <td>
                        <div class="fw-bold">${b.nombre}</div>
                        <small class="text-white-50">${b.desc.substring(0,30)}...</small>
                    </td>
                    <td><span class="badge-level level-${b.nivel.toLowerCase()}">${b.nivel}</span></td>
                    <td><span class="text-gold">${b.puntos} pts</span></td>
                    <td>${b.activo ? '<span class="text-success small">Activo</span>' : '<span class="text-danger small">Pausado</span>'}</td>
                    <td>
                        <button class="btn-action btn-edit" onclick="editBenefit(${index})"><i class="fas fa-edit"></i></button>
                        <button class="btn-action btn-delete" onclick="deleteBenefit(${index})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
        document.getElementById('statTotal').innerText = beneficios.length;
        localStorage.setItem("LK_CATALOGO_BENEFICIOS", JSON.stringify(beneficios));
    }

    function saveBenefit() {
        const index = document.getElementById('editIndex').value;
        const nuevo = {
            nombre: document.getElementById('bNombre').value,
            nivel: document.getElementById('bNivel').value,
            icono: document.getElementById('bIcono').value || 'fas fa-star',
            puntos: document.getElementById('bPuntos').value,
            vigencia: document.getElementById('bVigencia').value,
            desc: document.getElementById('bDesc').value,
            activo: document.getElementById('bActivo').checked
        };

        if(index === "") {
            beneficios.push(nuevo);
        } else {
            beneficios[index] = nuevo;
        }

        bootstrap.Modal.getInstance(document.getElementById('benefitModal')).hide();
        renderTable();
    }

    function editBenefit(index) {
        const b = beneficios[index];
        document.getElementById('editIndex').value = index;
        document.getElementById('bNombre').value = b.nombre;
        document.getElementById('bNivel').value = b.nivel;
        document.getElementById('bIcono').value = b.icono;
        document.getElementById('bPuntos').value = b.puntos;
        document.getElementById('bDesc').value = b.desc;
        document.getElementById('bActivo').checked = b.activo;
        
        new bootstrap.Modal(document.getElementById('benefitModal')).show();
    }

    function deleteBenefit(index) {
        if(confirm("¿Estás seguro de eliminar este privilegio del catálogo?")) {
            beneficios.splice(index, 1);
            renderTable();
        }
    }

    function resetForm() {
        document.getElementById('benefitForm').reset();
        document.getElementById('editIndex').value = "";
    }

    renderTable();
</script>

</body>
</html>
